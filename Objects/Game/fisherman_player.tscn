[gd_scene load_steps=16 format=3 uid="uid://b0r7scjvxmjtf"]

[ext_resource type="Script" path="res://Scripts/Player/player_fishing_movement.gd" id="1_08csq"]
[ext_resource type="Script" path="res://Scripts/Player/oxygen_meter.gd" id="2_0p11k"]
[ext_resource type="Texture2D" uid="uid://cpo1i0l0wtt0" path="res://Assets/Player/Overworld/Placeholder/PlayerOverworld-Placeholder.png" id="2_74tcf"]
[ext_resource type="Script" path="res://Scripts/StateMachine/state_machine.gd" id="3_24kb3"]
[ext_resource type="Script" path="res://Scripts/Player/Fishing/States/move_boat_state.gd" id="4_ldkte"]
[ext_resource type="Script" path="res://Scripts/Player/Fishing/States/line_fish_state.gd" id="5_asgr2"]
[ext_resource type="Script" path="res://Scripts/Player/Fishing/States/move_swim_state.gd" id="6_nto3b"]
[ext_resource type="Script" path="res://Scripts/Player/Fishing/line_fishing.gd" id="7_1286c"]
[ext_resource type="Script" path="res://Scripts/Player/Fishing/dive_fishing.gd" id="8_c8qtm"]

[sub_resource type="AtlasTexture" id="AtlasTexture_kkat7"]
atlas = ExtResource("2_74tcf")
region = Rect2(0, 0, 16, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lhbi0"]
size = Vector2(12, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qokl6"]
size = Vector2(5, 5)

[sub_resource type="AtlasTexture" id="AtlasTexture_fkgmy"]
atlas = ExtResource("2_74tcf")
region = Rect2(0, 0, 16, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rr7yf"]
size = Vector2(15, 19.5)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_a38f2"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("Hook:position")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("UI/PlayerName:text")
properties/2/spawn = true
properties/2/replication_mode = 2
properties/3/path = NodePath("UI/OxygenMeter:value")
properties/3/spawn = true
properties/3/replication_mode = 2

[node name="Fisherman" type="CharacterBody2D" node_paths=PackedStringArray("player_name_label", "oxygen_meter")]
position = Vector2(361, 130)
scale = Vector2(4, 4)
collision_layer = 2
script = ExtResource("1_08csq")
swim_speed = 150.0
player_name_label = NodePath("UI/PlayerName")
oxygen_meter = NodePath("UI/OxygenMeter")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_top = -10.0
offset_right = 27.0
offset_bottom = 10.0

[node name="PlayerName" type="Label" parent="UI"]
layout_mode = 0
offset_left = -6.75
offset_top = -6.0
offset_right = 41.25
offset_bottom = 17.0
scale = Vector2(0.29, 0.29)
text = "Johnly"
horizontal_alignment = 1
vertical_alignment = 2

[node name="OxygenMeter" type="VSlider" parent="UI"]
layout_mode = 0
offset_left = 9.75
offset_top = 0.75
offset_right = 25.75
offset_bottom = 83.75
scale = Vector2(0.22, 0.22)
script = ExtResource("2_0p11k")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = SubResource("AtlasTexture_kkat7")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_lhbi0")

[node name="State" type="Node" parent="." node_paths=PackedStringArray("entity", "starting_state")]
script = ExtResource("3_24kb3")
entity = NodePath("..")
starting_state = NodePath("Land")

[node name="Land" type="Node" parent="State" node_paths=PackedStringArray("sea_state", "line_fish_state")]
script = ExtResource("4_ldkte")
sea_state = NodePath("../Sea")
line_fish_state = NodePath("../LineFish")

[node name="LineFish" type="Node" parent="State" node_paths=PackedStringArray("hook", "land_state", "sea_state")]
script = ExtResource("5_asgr2")
hook = NodePath("../../Hook")
land_state = NodePath("../Land")
sea_state = NodePath("../Sea")

[node name="Sea" type="Node" parent="State" node_paths=PackedStringArray("fish_grab", "land_state")]
script = ExtResource("6_nto3b")
water_gravity = 10.0
fish_grab = NodePath("../../FishGrab")
land_state = NodePath("../Land")

[node name="Hook" type="Area2D" parent="." node_paths=PackedStringArray("fish_in_hook", "fisherman_player")]
collision_layer = 0
collision_mask = 16
monitorable = false
script = ExtResource("7_1286c")
fish_in_hook = NodePath("Sprite2D")
fisherman_player = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hook"]
shape = SubResource("RectangleShape2D_qokl6")

[node name="Sprite2D" type="Sprite2D" parent="Hook"]
visible = false
position = Vector2(0, 3)
scale = Vector2(0.46875, 0.46875)
texture = SubResource("AtlasTexture_fkgmy")

[node name="FishGrab" type="Area2D" parent="." node_paths=PackedStringArray("fisherman_player")]
collision_layer = 0
collision_mask = 16
monitorable = false
script = ExtResource("8_c8qtm")
fisherman_player = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="FishGrab"]
shape = SubResource("RectangleShape2D_rr7yf")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_a38f2")
